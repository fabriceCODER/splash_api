generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model DailyReport {
  id           String   @id @default(uuid())
  adminId      String
  admin        Admin    @relation(fields: [adminId], references: [id], onDelete: Cascade)
  date         DateTime @default(now())
  solved       Int
  unsolved     Int
  waterLost    Float
  avgSolveTime Float
}

model Admin {
  id           String        @id @default(uuid())
  name         String
  email        String        @unique()
  nationalId   String        @unique()
  location     String
  companyName  String
  companyEmail String
  numChannels  Int
  reports      DailyReport[]
  Channel      Channel[]
}

model Plumber {
  id         String    @id @default(uuid())
  name       String
  email      String    @unique
  nationalId String    @unique
  phone      String
  channels   Channel[]
}

model Channel {
  id        String   @id @default(uuid())
  name      String
  location  String
  stations  Int
  plumber   Plumber? @relation(fields: [plumberId], references: [id])
  plumberId String?
  Admin     Admin?   @relation(fields: [adminId], references: [id])
  adminId   String?
}
